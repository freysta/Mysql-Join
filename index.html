<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guia Completo SQL - Prova</title>
    <style>
        @media print {
            body { margin: 0; }
            .no-print { display: none; }
            .page-break { page-break-before: always; }
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 900px;
            margin: 0 auto;
            padding: 0;
            background: #f8f9fa;
        }
        
        /* Navbar Styles */
        .navbar {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 15px 20px;
            border-radius: 0 0 15px 15px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }
        
        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 900px;
            margin: 0 auto;
        }
        
        .nav-title {
            color: white;
            font-size: 1.4em;
            font-weight: bold;
            margin: 0;
        }
        
        .nav-buttons {
            display: flex;
            gap: 10px;
        }
        
        .nav-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .nav-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.6);
            transform: translateY(-2px);
        }
        
        .nav-btn.active {
            background: white;
            color: #667eea;
            font-weight: bold;
        }
        
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin: 0 20px 20px 20px;
        }
        
        .content-section {
            display: none;
        }
        
        .content-section.active {
            display: block;
        }
        
        h1 {
            color: #2c3e50;
            text-align: center;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        
        h2 {
            color: #e74c3c;
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
            color: white;
            padding: 12px 15px;
            border-radius: 8px;
            margin: 25px 0 15px 0;
            box-shadow: 0 2px 5px rgba(238, 90, 82, 0.3);
        }
        
        h3 {
            color: #2980b9;
            border-left: 4px solid #3498db;
            padding-left: 15px;
            margin: 20px 0 10px 0;
        }
        
        h4 {
            color: #8e44ad;
            margin: 15px 0 8px 0;
        }
        
        code {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        
        pre {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            border-left: 4px solid #3498db;
            margin: 15px 0;
            font-size: 0.9em;
        }
        
        pre code {
            background: none;
            padding: 0;
        }
        
        .tip-box {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            box-shadow: 0 2px 5px rgba(116, 185, 255, 0.3);
        }
        
        .warning-box {
            background: linear-gradient(135deg, #fdcb6e, #e17055);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            box-shadow: 0 2px 5px rgba(253, 203, 110, 0.3);
        }
        
        .success-box {
            background: linear-gradient(135deg, #00b894, #00a085);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            box-shadow: 0 2px 5px rgba(0, 184, 148, 0.3);
        }
        
        .example-box {
            background: linear-gradient(135deg, #a29bfe, #6c5ce7);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            box-shadow: 0 2px 5px rgba(162, 155, 254, 0.3);
        }
        
        .clinic-box {
            background: linear-gradient(135deg, #fd79a8, #e84393);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            box-shadow: 0 2px 5px rgba(253, 121, 168, 0.3);
        }
        
        ul, ol {
            padding-left: 20px;
        }
        
        li {
            margin: 8px 0;
        }
        
        .icon {
            font-size: 1.2em;
            margin-right: 8px;
        }
        
        .print-btn {
            background: linear-gradient(135deg, #6c5ce7, #5f3dc4);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            margin: 20px auto;
            display: block;
            box-shadow: 0 2px 10px rgba(108, 92, 231, 0.3);
            transition: transform 0.2s;
        }
        
        .print-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(108, 92, 231, 0.4);
        }
        
        .header-info {
            text-align: center;
            background: linear-gradient(135deg, #a29bfe, #6c5ce7);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 25px;
        }
        
        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 15px 0;
        }
        
        @media (max-width: 768px) {
            .two-column {
                grid-template-columns: 1fr;
            }
            .nav-container {
                flex-direction: column;
                gap: 10px;
            }
            .nav-title {
                font-size: 1.2em;
            }
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            background: white;
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        
        th {
            background: #3498db;
            color: white;
        }
        
        tr:nth-child(even) {
            background: #f9f9f9;
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar no-print">
        <div class="nav-container">
            <h3 class="nav-title">üìö Guia SQL - Prova</h3>
            <div class="nav-buttons">
                <button class="nav-btn active" onclick="showContent('general')">üìñ Estudo Geral</button>
                <a class="nav-btn" href="clinicaexemplo.html" style="text-decoration: none; display: inline-block;">üè• Espec√≠fico Cl√≠nica</a>
                <button class="nav-btn" onclick="window.print()">üñ®Ô∏è Imprimir</button>
            </div>
        </div>
    </nav>

    <!-- Conte√∫do Geral -->
    <div id="general" class="content-section active">
        <div class="container">
            <div class="header-info">
                <h1>üìö Guia Completo SQL - Prova</h1>
                <p><strong>Banco de Dados - Consultas SELECT Completas</strong></p>
                <p>Estruturas, Sintaxe, Exemplos e Dicas Pr√°ticas</p>
            </div>

            <h2><span class="icon">üéØ</span>Fundamentos do SELECT</h2>

            <h3><span class="icon">üìù</span>Estrutura B√°sica do SELECT</h3>
            <pre><code>SELECT [DISTINCT] colunas
FROM tabela [alias]
[WHERE condi√ß√µes]
[GROUP BY colunas]
[HAVING condi√ß√µes_agregadas]
[ORDER BY colunas [ASC|DESC]]
[LIMIT n√∫mero];</code></pre>

            <h3><span class="icon">üîç</span>Tipos de SELECT</h3>

            <h4>1. SELECT Simples:</h4>
            <pre><code>-- Selecionar todas as colunas
SELECT * FROM tabela;

-- Selecionar colunas espec√≠ficas
SELECT nome, idade, email FROM usuarios;

-- Selecionar com alias
SELECT nome AS nome_completo, idade AS anos FROM usuarios;</code></pre>

            <h4>2. SELECT com WHERE (Filtros):</h4>
            <pre><code>-- Filtros b√°sicos
SELECT * FROM produtos WHERE preco > 100;
SELECT * FROM usuarios WHERE idade BETWEEN 18 AND 65;
SELECT * FROM clientes WHERE nome LIKE '%Silva%';

-- Filtros com datas
SELECT * FROM pedidos WHERE data_pedido = '2025-01-15';
SELECT * FROM eventos WHERE data_evento BETWEEN '2025-01-01' AND '2025-12-31';

-- Filtros m√∫ltiplos
SELECT * FROM produtos WHERE categoria = 'Eletr√¥nicos' AND preco < 500;
SELECT * FROM usuarios WHERE cidade = 'S√£o Paulo' OR cidade = 'Rio de Janeiro';</code></pre>

            <h4>3. SELECT com ORDER BY (Ordena√ß√£o):</h4>
            <pre><code>-- Ordena√ß√£o simples
SELECT * FROM produtos ORDER BY preco ASC;  -- Crescente
SELECT * FROM produtos ORDER BY preco DESC; -- Decrescente

-- Ordena√ß√£o m√∫ltipla
SELECT * FROM usuarios ORDER BY cidade ASC, nome ASC;
SELECT * FROM produtos ORDER BY categoria, preco DESC;</code></pre>

            <h4>4. SELECT com LIMIT:</h4>
            <pre><code>-- Limitar resultados
SELECT * FROM produtos ORDER BY preco DESC LIMIT 10;  -- Top 10 mais caros
SELECT * FROM usuarios LIMIT 5;  -- Primeiros 5 registros</code></pre>

            <h2><span class="icon">üîó</span>JOINs - Relacionamentos entre Tabelas</h2>

            <h3><span class="icon">ü§ù</span>Tipos de JOIN</h3>

            <div class="two-column">
                <div>
                    <h4>INNER JOIN:</h4>
                    <pre><code>SELECT a.*, b.nome
FROM tabela_a a
INNER JOIN tabela_b b
    ON a.fk_id = b.id;</code></pre>
                    <p><small>Retorna apenas registros que existem em ambas as tabelas</small></p>
                </div>
                <div>
                    <h4>LEFT JOIN:</h4>
                    <pre><code>SELECT a.*, b.nome
FROM tabela_a a
LEFT JOIN tabela_b b
    ON a.fk_id = b.id;</code></pre>
                    <p><small>Retorna TODOS os registros da tabela A, mesmo sem correspond√™ncia em B</small></p>
                </div>
            </div>

            <div class="example-box">
                <h4>üè¢ Exemplo Gen√©rico - JOIN M√∫ltiplo:</h4>
                <pre><code>-- Relat√≥rio: Pedidos + Clientes + Produtos
SELECT 
    p.id_pedido,
    p.data_pedido,
    c.nome AS cliente,
    c.email,
    pr.nome AS produto,
    pr.preco
FROM pedidos p
INNER JOIN clientes c ON p.fk_cliente = c.id_cliente
INNER JOIN produtos pr ON p.fk_produto = pr.id_produto
WHERE p.data_pedido BETWEEN '2025-01-01' AND '2025-01-31';</code></pre>
            </div>

            <h2><span class="icon">üìä</span>Fun√ß√µes de Agrega√ß√£o</h2>

            <h3><span class="icon">üî¢</span>Fun√ß√µes Principais</h3>
            
            <table>
                <tr>
                    <th>Fun√ß√£o</th>
                    <th>Descri√ß√£o</th>
                    <th>Exemplo</th>
                </tr>
                <tr>
                    <td><code>COUNT(*)</code></td>
                    <td>Conta registros</td>
                    <td><code>SELECT COUNT(*) FROM usuarios</code></td>
                </tr>
                <tr>
                    <td><code>SUM()</code></td>
                    <td>Soma valores</td>
                    <td><code>SELECT SUM(preco) FROM produtos</code></td>
                </tr>
                <tr>
                    <td><code>AVG()</code></td>
                    <td>M√©dia</td>
                    <td><code>SELECT AVG(idade) FROM usuarios</code></td>
                </tr>
                <tr>
                    <td><code>MAX()</code></td>
                    <td>Valor m√°ximo</td>
                    <td><code>SELECT MAX(salario) FROM funcionarios</code></td>
                </tr>
                <tr>
                    <td><code>MIN()</code></td>
                    <td>Valor m√≠nimo</td>
                    <td><code>SELECT MIN(data_nascimento) FROM clientes</code></td>
                </tr>
            </table>

            <h3><span class="icon">üìà</span>GROUP BY e HAVING</h3>

            <pre><code>-- Contagem por categoria
SELECT categoria, COUNT(*) AS quantidade
FROM produtos
GROUP BY categoria;

-- M√©dia de pre√ßos por categoria (apenas categorias com m√©dia > 100)
SELECT categoria, AVG(preco) AS media_preco
FROM produtos
GROUP BY categoria
HAVING AVG(preco) > 100;

-- Vendas por m√™s
SELECT 
    YEAR(data_venda) AS ano,
    MONTH(data_venda) AS mes,
    SUM(valor) AS total_vendas
FROM vendas
GROUP BY YEAR(data_venda), MONTH(data_venda)
ORDER BY ano, mes;</code></pre>

            <div class="tip-box">
                <strong>üí° Regra de Ouro:</strong>
                <ul>
                    <li><strong>WHERE:</strong> Filtra ANTES de agrupar</li>
                    <li><strong>HAVING:</strong> Filtra DEPOIS de agrupar</li>
                    <li>Se usar GROUP BY, todas as colunas no SELECT devem estar no GROUP BY OU ser fun√ß√µes de agrega√ß√£o</li>
                </ul>
            </div>

            <h2><span class="icon">üîç</span>Subconsultas (Subqueries)</h2>

            <h3><span class="icon">üéØ</span>Tipos de Subconsultas</h3>

            <h4>1. Subconsulta Simples:</h4>
            <pre><code>-- Produtos com pre√ßo acima da m√©dia
SELECT nome, preco
FROM produtos
WHERE preco > (SELECT AVG(preco) FROM produtos);

-- Funcion√°rio com maior sal√°rio
SELECT nome, salario
FROM funcionarios
WHERE salario = (SELECT MAX(salario) FROM funcionarios);</code></pre>

            <h4>2. Subconsulta com IN:</h4>
            <pre><code>-- Clientes que fizeram pedidos
SELECT nome, email
FROM clientes
WHERE id_cliente IN (SELECT DISTINCT fk_cliente FROM pedidos);

-- Produtos de categorias espec√≠ficas
SELECT nome, preco
FROM produtos
WHERE categoria IN ('Eletr√¥nicos', 'Inform√°tica', 'Games');</code></pre>

            <h4>3. Subconsulta com EXISTS:</h4>
            <pre><code>-- Clientes que t√™m pedidos
SELECT c.nome, c.email
FROM clientes c
WHERE EXISTS (
    SELECT 1 FROM pedidos p 
    WHERE p.fk_cliente = c.id_cliente
);</code></pre>

            <h2><span class="icon">üõ†Ô∏è</span>Operadores e Fun√ß√µes √öteis</h2>

            <h3><span class="icon">üî§</span>Operadores de Texto</h3>
            <pre><code>-- LIKE - Busca por padr√µes
SELECT * FROM usuarios WHERE nome LIKE 'Jo√£o%';     -- Come√ßa com Jo√£o
SELECT * FROM usuarios WHERE nome LIKE '%Silva%';   -- Cont√©m Silva
SELECT * FROM usuarios WHERE nome LIKE '%_a';       -- Termina com 'a' (2 caracteres)

-- CONCAT - Concatenar strings
SELECT CONCAT(nome, ' - ', email) AS info FROM usuarios;

-- UPPER/LOWER - Mai√∫scula/Min√∫scula
SELECT UPPER(nome) AS nome_maiusculo FROM usuarios;
SELECT LOWER(email) AS email_minusculo FROM usuarios;</code></pre>

            <h3><span class="icon">üìÖ</span>Operadores de Data</h3>
            <pre><code>-- Extrair partes da data
SELECT 
    YEAR(data_nascimento) AS ano,
    MONTH(data_nascimento) AS mes,
    DAY(data_nascimento) AS dia
FROM usuarios;

-- Calcular idade
SELECT nome, 
    TIMESTAMPDIFF(YEAR, data_nascimento, CURDATE()) AS idade
FROM usuarios;

-- Filtros de data
SELECT * FROM pedidos WHERE data_pedido >= '2025-01-01';
SELECT * FROM eventos WHERE MONTH(data_evento) = 12;  -- Dezembro</code></pre>

            <h3><span class="icon">üßÆ</span>Operadores Num√©ricos</h3>
            <pre><code>-- Opera√ß√µes matem√°ticas
SELECT 
    nome,
    preco,
    preco * 1.1 AS preco_com_reajuste,
    ROUND(preco * 0.9, 2) AS preco_promocional
FROM produtos;

-- BETWEEN - Entre valores
SELECT * FROM produtos WHERE preco BETWEEN 100 AND 500;

-- IN - Lista de valores
SELECT * FROM usuarios WHERE idade IN (18, 21, 25, 30);</code></pre>

            <h2><span class="icon">‚ö†Ô∏è</span>Pegadinhas e Cuidados</h2>

            <div class="warning-box">
                <h4>üö® Cuidados Importantes:</h4>
                <ol>
                    <li><strong>Aspas:</strong> Use aspas simples para strings: <code>'texto'</code></li>
                    <li><strong>Datas:</strong> Formato ISO <code>'YYYY-MM-DD'</code></li>
                    <li><strong>NULL:</strong> Use <code>IS NULL</code> ou <code>IS NOT NULL</code>, nunca <code>= NULL</code></li>
                    <li><strong>LIKE:</strong> Case-sensitive em alguns SGBDs</li>
                    <li><strong>GROUP BY:</strong> Todas as colunas n√£o-agregadas devem estar no GROUP BY</li>
                    <li><strong>ORDER BY:</strong> Deve ser a √∫ltima cl√°usula (antes do LIMIT)</li>
                </ol>
            </div>

            <h2><span class="icon">üìù</span>Padr√µes de Consulta Comuns</h2>

            <h3><span class="icon">üèÜ</span>Top N Registros</h3>
            <pre><code>-- Top 10 produtos mais caros
SELECT nome, preco
FROM produtos
ORDER BY preco DESC
LIMIT 10;

-- Top 5 clientes por n√∫mero de pedidos
SELECT c.nome, COUNT(p.id_pedido) AS total_pedidos
FROM clientes c
INNER JOIN pedidos p ON c.id_cliente = p.fk_cliente
GROUP BY c.id_cliente, c.nome
ORDER BY total_pedidos DESC
LIMIT 5;</code></pre>

            <h3><span class="icon">üìä</span>Relat√≥rios de Resumo</h3>
            <pre><code>-- Resumo de vendas por m√™s
SELECT 
    DATE_FORMAT(data_venda, '%Y-%m') AS mes_ano,
    COUNT(*) AS total_vendas,
    SUM(valor) AS faturamento,
    AVG(valor) AS ticket_medio
FROM vendas
WHERE data_venda >= '2025-01-01'
GROUP BY DATE_FORMAT(data_venda, '%Y-%m')
ORDER BY mes_ano;</code></pre>

            <h3><span class="icon">üîç</span>Busca com M√∫ltiplos Crit√©rios</h3>
            <pre><code>-- Busca avan√ßada de produtos
SELECT p.nome, p.preco, c.nome AS categoria
FROM produtos p
INNER JOIN categorias c ON p.fk_categoria = c.id_categoria
WHERE 
    (p.nome LIKE '%notebook%' OR p.nome LIKE '%laptop%')
    AND p.preco BETWEEN 1000 AND 3000
    AND c.nome IN ('Inform√°tica', 'Eletr√¥nicos')
ORDER BY p.preco ASC;</code></pre>

            <h2><span class="icon">üéØ</span>Estrat√©gia para Resolver Quest√µes</h2>

            <div class="success-box">
                <h4>üìã Passo a Passo:</h4>
                <ol>
                    <li><strong>Leia</strong> a quest√£o inteira e identifique o que √© pedido</li>
                    <li><strong>Identifique</strong> as tabelas necess√°rias</li>
                    <li><strong>Desenhe</strong> mentalmente as rela√ß√µes (FKs)</li>
                    <li><strong>Defina</strong> o tipo de JOIN necess√°rio</li>
                    <li><strong>Liste</strong> as colunas do SELECT</li>
                    <li><strong>Defina</strong> os filtros WHERE</li>
                    <li><strong>Veja</strong> se precisa de GROUP BY/HAVING</li>
                    <li><strong>Defina</strong> a ordena√ß√£o ORDER BY</li>
                    <li><strong>Teste</strong> mentalmente se o resultado faz sentido</li>
                </ol>
            </div>

            <h2><span class="icon">üî•</span>Dicas de Ouro</h2>

            <div class="tip-box">
                <ul>
                    <li><strong>Sempre use ALIAS</strong> para tabelas e colunas complexas</li>
                    <li><strong>INNER JOIN</strong> quando precisar de dados que existem em ambas as tabelas</li>
                    <li><strong>LEFT JOIN</strong> quando quiser TODOS os registros da tabela principal</li>
                    <li><strong>DISTINCT</strong> para evitar duplicatas em JOINs complexos</li>
                    <li><strong>WHERE</strong> antes de GROUP BY, <strong>HAVING</strong> depois</li>
                    <li><strong>ORDER BY</strong> sempre no final (antes do LIMIT)</li>
                    <li><strong>Use subconsultas</strong> para valores m√°ximos/m√≠nimos</li>
                    <li><strong>BETWEEN</strong> para intervalos de datas e n√∫meros</li>
                    <li><strong>LIKE</strong> para buscas parciais em texto</li>
                    <li><strong>IN</strong> para listas de valores</li>
                </ul>
            </div>

            <div class="success-box" style="text-align: center; margin-top: 30px;">
                <h2 style="background: none; color: white; margin: 0; padding: 0;">üçÄ Sucesso na Prova!</h2>
                <p style="margin: 10px 0 0 0;">Agora voc√™ tem todas as ferramentas para arrasar nas consultas SQL! üöÄ</p>
            </div>
        </div>
    </div>
